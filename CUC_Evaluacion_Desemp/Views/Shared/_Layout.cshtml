@using System.Security.Claims
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- jQuery CDN (minified) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <title>Evaluación del Desempeño CUC</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/611d65fda4.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="~/sources/css/styles.css" />
    <link rel="stylesheet" href="~/sources/css/alerta.css" />
    <script defer src="~/sources/js/scripts.js"></script>

</head>
<body>
    @{
        var claimsUser = User as ClaimsPrincipal;
        var idRol = claimsUser?.FindFirst("IdRol")?.Value;
        var nombreRol = claimsUser?.FindFirst(ClaimTypes.Role)?.Value;
    }

    <div class="wrapper">

        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>
                    <a href="@Url.Action("Index", "Home")" style="color: inherit; text-decoration: none;">
                        Evaluación CUC
                    </a>
                </h2>
            </div>
            <ul class="sidebar-menu">
                <!-- Menú principal (solo 3 opciones) -->
                <li>
                    <a href="#" class="main-menu-item" data-target="mantenimientos">
                        Mantenimientos <i class="fa-solid fa-screwdriver"></i>
                    </a>
                </li>
                <li>
                    <a href="#" class="main-menu-item" data-target="evaluacion">
                        Evaluación <i class="fa-solid fa-pen-to-square"></i>
                    </a>
                </li>
                <li>
                    <a href="#" class="main-menu-item" data-target="reportes">
                        Reportes <i class="fa-solid fa-flag"></i>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Contenedor para el menú flotante -->
        <div id="floating-menu-container" class="floating-menu-container">
            <!-- El contenido se cargará dinámicamente mediante JavaScript -->
        </div>



        <div class="main-content">
            <header class="topbar">
                <h1>Sistema de Evaluación del Desempeño CUC</h1>
                <div class="user-menu d-flex align-items-center gap-2 text-white">
                    <span>
                        <strong>Bienvenido(a): Michael Vargas</strong><br />
                        <small>Rol: Admin</small>
                    </span>
                    <button id="userIcon" class="user-icon" type="button">👤</button>
                    <ul class="dropdown-menu">
                        <li><a href="@Url.Action("Login", "Auth")">Cerrar sesión</a></li>
                    </ul>
                </div>
            </header>

            <main>
                @RenderBody()
            </main>

            <footer>
                <img src="~/sources/img/LogoCUCFondoBlanco.jpg" alt="Logo CUC">
                <p>&copy; @DateTime.Now.Year Evaluación CUC - Todos los derechos reservados</p>
            </footer>
        </div>
    </div>

    @RenderSection("Scripts", required: false)
    <script defer src="~/sources/js/menuFlotante.js"></script>
    <script defer src="~/sources/js/scripts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    @*********************************************************************************
         ESTA PARTE DEBE ESTAR EN LA VISTA PARA QUE FUNCIONEN LAS RUTAS
        *********************************************************************************@
    <script>
        window.menuData = {
        mantenimientos: {
            sections: [
                {
                    title: "General",
                    items: [
                        { text: "Dependencias", url: "@Url.Action("ManteniDependencias", "Mantenimientos")" },
                        { text: "Roles", url: "@Url.Action("ManteniRoles", "Mantenimientos")" },
                        { text: "Puestos", url: "@Url.Action("ManteniPuesto", "Mantenimientos")" },
                        { text: "Areas", url: "@Url.Action("ManteniArea", "Mantenimientos")" },
                        { text: "Carreras", url: "@Url.Action("ManteniCarreras", "Mantenimientos")" },
                        { text: "Funcionarios", url: "@Url.Action("ManteniFuncionarios", "Mantenimientos")" },
                        { text: "Conglomerados", url: "@Url.Action("ManteniConglomerados", "Mantenimientos")" },
                        { text: "Objetivos", url: "@Url.Action("ManteniObjetivos", "Mantenimientos")" }
                    ]
                },
                {
                    title: "Competencias",
                    items: [
                        { text: "Tipos de Competencias", url: "@Url.Action("ManteniTiposCompetencias", "Mantenimientos")" },
                        { text: "Comportamientos", url: "@Url.Action("ManteniComportamientos", "Mantenimientos")" },
                        { text: "Mantenimiento Competencias", url: "@Url.Action("ManteniCompetencias", "Mantenimientos")" },
                        { text: "Ver comportamientos y niveles", url: "@Url.Action("ConsultarComportamientosYNiveles", "Mantenimientos")" },
                        { text: "Asignar Comportamientos y Niveles", url: "@Url.Action("SelecCompetenciaParaAsignarComportamientos", "Mantenimientos")" }
                    ]
                }
            ]
        },
        evaluacion: {
            sections: [
                {
                    title: "Planificación",
                    items: [
                        { text: "Planificar Evaluación", url: "@Url.Action("SeleccionarSubalterno", "Evaluacion")" }
                    ],
                },
                {
                     title: "Evaluación y Seguimientos",
                     items: [
                         { text: "Evaluar Sub-Alterno", url: "@Url.Action("SeleccionarSubalternoParaEvaluar", "Evaluacion")" }
                     ],
                }
            ],
        },
        reportes: {
            sections: [
                {
                    title: "Reportes",
                    items: [
                        { text: "Planificar Evaluación", url: "@Url.Action("SeleccionarSubalterno", "Evaluacion")" }
                    ]
                }
            ]
        }
    };
    </script>



</body>
</html>

